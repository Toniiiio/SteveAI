source("R/link_checker.R")
load("data/comp_urls_indeed.RData")
load("data/job_page_candidates_indeed.RData")
urls <- unlist(comp_urls)
indeed_results2 <- list()
pjs <<- webdriver::run_phantomjs()
ses <<- webdriver::Session$new(port = pjs$port)
names(indeed_results)
grepl(urls, pattern = "daenischesbettenlager")
grepl(urls, pattern = "daenischesbettenlager") %>% which
nr <- 560
url <- urls[nr]
url
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
url <- urls[nr]
url
indeed_results2[[url]]
url
ses
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
indeed_results2[[url]]
for(nr in seq(urls)[561:3672]){
url <- urls[nr]
url
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
save(indeed_results2, file = "data/job_page_candidates_indeed.RData")
}
pjs <<- webdriver::run_phantomjs()
ses <<- webdriver::Session$new(port = pjs$port)
for(nr in seq(urls)[561:3672]){
url <- urls[nr]
url
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
save(indeed_results2, file = "data/job_page_candidates_indeed.RData")
}
for(nr in seq(urls)[562:3672]){
url <- urls[nr]
url
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
save(indeed_results2, file = "data/job_page_candidates_indeed.RData")
}
nr <- 566
url <- urls[nr]
url
pjs <<- webdriver::run_phantomjs()
ses <<- webdriver::Session$new(port = pjs$port)
for(nr in seq(urls)[568:3672]){
url <- urls[nr]
url
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
save(indeed_results2, file = "data/job_page_candidates_indeed.RData")
}
indeed_results2[[1]]$candidate_meta
out <- indeed_results2[[1]]$candidate_meta
out
required_len <- 4
required_len <- 5
tags_pure <- out$tags_pure
classes <- out$classes
add_classes(required_len, out$tags_pure, out$classes, doc)
out <- indeed_results2[[2]]$candidate_meta
out
required_len <- 5
nr <- 3
out <- indeed_results2[[nr]]$candidate_meta
out
nr <- nr + 1
out <- indeed_results2[[nr]]$candidate_meta
out
out <- indeed_results2[[nr]]
out$candidate_meta
out$candidate_meta
out$doc %>% showHtmlPage()
out$parsed_links[out$winner]
out$parsed_links$href[out$winner]
out$parsed_links$href[out$winner] %>% browseURL()
out$parsed_links$href[out$winner] %>% ses$go()
ses$takeScreenshot()
ses$executeScript("alert(2)")
ses$takeScreenshot()
ses$refresh()
ses$executeScript("return 42 + 'foobar';")
ses$executeScript("return document.cookies;")
ses$executeScript("return document.cookie")
ses$go("https://www.r-bloggers.com/")
ses$executeScript("return document.cookie")
ses$go("https://www.daikin.com/careers/index.html")
ses$executeScript("return document.cookie")
ses$go("https://www.r-bloggers.com/")
ses$executeScript("return document.cookie")
nr
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
names(indeed_results2)
nr
nr <- 6
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
out
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
out$doc %>% showHtmlPage()
out$parsed_links$href[out$winner] %>% browseURL()
out$parsed_links
nr
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
nr <- 575
url <- urls[nr]
url
for(nr in seq(urls)[575:3672]){
url <- urls[nr]
url
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
save(indeed_results2, file = "data/job_page_candidates_indeed.RData")
}
nr
indeed_results2 %>% lengths()
nr <- 15
out <- indeed_results2[[nr]]
out$candidate_meta
out$candidate_meta
out$doc %>% showHtmlPage()
out$parsed_links$href[out$winner] %>% browseURL()
ses$go(out$parsed_links$href[out$winner])
ses$takeScreenshot()
input_xpath <- "//input[@type = 'submit' or @value = 'Search Jobs' or @value = 'Search' or @title = 'Search Jobs' or @value='Suche starten']"
inputs <- ses$findElements(xpath = input_xpath)
job_related_page_xp <- "//*[contains(text(), 'Find a job') or contains(text(), 'Search and apply') or contains(text(), 'Global Career Opportunities') or contains(text(), 'Search Jobs') or contains(text(), 'Search for jobs') or contains(text(), 'Find Jobs')  or contains(text(), 'Aktuelle Stellenangebote') or contains(text(), 'gewÃ¼nschte Stelle')  or contains(text(), 'job search')]"
is_job_related <- ses$findElements(xpath = job_related_page_xp) %>% length
is_job_related
ses$go("https://careers-dbbh.icims.com/jobs/intro?hashed=-435743365&mobile=false&width=1549&height=500&bga=true&needsRedirect=false&jan1offset=-300&jun1offset=-240")
input_xpath <- "//input[@type = 'submit' or @value = 'Search Jobs' or @value = 'Search' or @title = 'Search Jobs' or @value='Suche starten']"
inputs <- ses$findElements(xpath = input_xpath)
input_xpath <- "//input[@type = 'submit' or @value = 'Search Jobs' or @value = 'Search' or @title = 'Search Jobs' or @value='Suche starten']"
inputs <- ses$findElements(xpath = input_xpath)
inputs <- ses$findElements(xpath = "//input")
inputs <- ses$findElements(xpath = "//input")
ses$takeScreenshot()
ses$takeScreenshot()
inputs <- ses$findElements(xpath = "//input")
inputs <- ses$findElements(xpath = "//div")
inputs <- ses$findElements(xpath = "//button")
ses$go("https://careers-dbbh.icims.com/jobs/intro?hashed=-435743365&mobile=false&width=1549&height=500&bga=true&needsRedirect=false&jan1offset=-300&jun1offset=-240")
inputs <- ses$findElements(xpath = "//input")
nr
out <- indeed_results2[[nr]]
out$candidate_meta
out$candidate_meta
out$doc %>% showHtmlPage()
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
out$doc %>% showHtmlPage()
out$parsed_links$href[out$winner] %>% browseURL()
out$parsed_links$href
out$counts
ses$go("https://www.careers.tripadvisor.com/")
ses$getStatus()
ses$go("https://www.careers.tripadvisor.com/")
ses$takeScreenshot()
ses$getUrl()
ses$getUrl()
ses$go("https://www.careers.tripadvisor.com/")
ses$getUrl()
ses$go("https://careers.tripadvisor.com/")
ses$getUrl()
ses$readLog()
2
2
2
2
2
2
2
2
nr <- 16
out <- indeed_results2[[nr]]
out$candidate_meta
nr <- nr + 1
out <- indeed_results2[[nr]]
out$candidate_meta
out$doc %>% showHtmlPage()
url <- "https://www.elkhaus.de/"
library(rvest)
library(httr)
library(magrittr)
library(urltools)
# system(
#   paste0("sudo -kS docker rm -vf $(docker ps -a -q)"),
#   input = "vistarundle1!!!"
# )
# system(
#   paste0("sudo -S docker rmi -f $(docker images -a -q)"),
#   input = "vistarundle1!!!"
# )
# powershell
# docker ps -aq | foreach {docker rm $_}
source("R/is_job_offer_page.R")
source("R/handle_links.R")
source("R/link_checker.R")
source("R/target_text.R")
load("data/comp_urls_indeed.RData")
load("data/job_page_candidates_indeed.RData")
urls <- unlist(comp_urls)
#ses <<- start_phantom()
# if(!exists("indeed_reuslts")){
#   indeed_results2 <- list()
# }
#remDr <- start_selenium(port = 4457)
names(indeed_results) %>% .[length(.)] %>%
magrittr::equals(urls) %>% which
# 275 --> repaired doc
# 20 fails
# 3 let selenium stop
# https://www.accenture.com/us-en/careers/jobsearch weird html with only script but with data
# but https://www.accenture.com/us-en/careers/explore-careers/area-of-interest/consulting-careers works
# 21 fails
# 22 fails
# 41 ses fails
# 42 weird
d <- urls %>% grepl(pattern = "axa") %>% which
d
d %>% urls[.]
pjs <<- webdriver::run_phantomjs()
ses <<- webdriver::Session$new(port = pjs$port)
url
url <- "https://www.elkhaus.de/"
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
indeed_results2$`https://www.elkhaus.de/`$candidate_meta
indeed_results2$`https://www.elkhaus.de/`$parsed_links$href
indeed_results2$`https://www.elkhaus.de/`$parsed_links$href[1] %>% ses$go()
indeed_results2$`https://www.elkhaus.de/`$candidate_meta
for(nr in seq(urls)[585:3672]){
url <- urls[nr]
url
indeed_results2[[url]] <- tryCatch(
find_job_page(url, ses, use_phantom = TRUE),
error = function(e){
print("Call to find_job_page failed with:")
print(e)
return("")
}
)
save(indeed_results2, file = "data/job_page_candidates_indeed.RData")
}
nr <- 107
#nr <- 107
xx <- which(lengths(indeed_results2) == 7)
library(rvest)
library(httr)
library(magrittr)
library(urltools)
load(file = "data/job_page_candidates_indeed.RData")
source("R/configure_xpath.R")
nrr <- xx[nr]
#nr <- 107
xx <- which(lengths(indeed_results2) == 7)
nrr <- xx[nr]
out <- indeed_results2[[nrr]]
out$candidate_meta
nr <- 110
#nr <- 110
xx <- which(lengths(indeed_results2) == 7)
nrr <- xx[nr]
out <- indeed_results2[[nrr]]
out$candidate_meta
out$parsed_links$href[out$winner]
out$doc %>% SteveAI::showHtmlPage()
?str_count
nr <- nr + 1
out$parsed_links$href[out$winner]
nr <- nr + 1
nrr <- xx[nr]
out <- indeed_results2[[nrr]]
out$candidate_meta
out$parsed_links$href[out$winner]
out$doc %>% SteveAI::showHtmlPage()
nr <- nr + 1
out$parsed_links$href[out$winner] %>% browseURL()
